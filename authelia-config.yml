# Add this to your Authelia configuration.yml

access_control:
  default_policy: deny
  
  rules:
    # Public board display - no authentication needed
    - domain: board.yourdomain.com
      policy: bypass
      resources:
        - "^/$"                    # Main board page
        - "^/ws$"                  # WebSocket connection (critical!)
        - "^/static/.*"            # Static assets (CSS, JS, images)
    
    # Protected editor and announcement pages
    - domain: board.yourdomain.com
      policy: two_factor          # or "one_factor" for password only
      resources:
        - "^/edit$"                # Departure editor
        - "^/announce$"            # TTS announcements
        - "^/api/departures.*"     # All departure API endpoints
        - "^/api/speak$"           # TTS generation endpoint
